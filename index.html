<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shared Planning Calendar</title>
  <!-- Link to the correct stylesheet -->
  <link rel="stylesheet" href="./styles.css">
  <!-- Link to the favicon -->
  <link rel="icon" href="./favicon.ico" />
  <!-- Link to the XLSX library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
  <div class="app">
    <!-- Logo Container -->
    <div class="logo-wrapper">
      <div class="logo-container">
        <!-- Corrected path for the logo -->
        <img src="./images/logo3.webp" alt="Shared Planning Calendar Logo" class="logo">
      </div>
    </div>

    <h1>Shared Planning Calendar</h1>
    <div class="subtitle">by OneByte LLC</div> <!-- Added subtitle -->

    <!-- Key for Calendar -->
    <div class="calendar-key">
      <div class="key-item"><span class="key-box requested"></span>Requested</div>
      <div class="key-item"><span class="key-box avoided"></span>Avoided</div>
      <div class="key-item"><span class="key-box conflict"></span>Conflict</div>
    </div>

    <!-- User Toggle -->
    <div id="userToggle" class="user-toggle">
      <button id="user1Button" class="active" aria-label="Switch to Dad">Dad</button>
      <button id="user2Button" aria-label="Switch to Mom">Mom</button>
    </div>

    <!-- Calendar Header -->
    <div class="calendar-header">
      <button id="prevMonth" aria-label="Go to previous month">&lt; Prev</button>
      <span id="monthYear"></span>
      <button id="nextMonth" aria-label="Go to next month">Next &gt;</button>
    </div>

    <!-- Calendar with Day Labels -->
    <div class="day-labels">
      <span>Sun</span>
      <span>Mon</span>
      <span>Tue</span>
      <span>Wed</span>
      <span>Thu</span>
      <span>Fri</span>
      <span>Sat</span>
    </div>
    <div id="dates"></div>

    <!-- Preferences Section -->
    <div class="preferences-summary">
      <p><strong>Dad's Preferences:</strong> Requested: <span id="dadRequestedDatesInline">None</span>, Avoided: <span id="dadAvoidedDatesInline">None</span></p>
      <p><strong>Mom's Preferences:</strong> Requested: <span id="momRequestedDatesInline">None</span>, Avoided: <span id="momAvoidedDatesInline">None</span></p>
    </div>

    <!-- Generate Output Button -->
    <button id="generateOutput" class="generate-output-btn">Generate Output</button>

    <!-- Proposed Calendar Section -->
    <div class="proposed-calendar">
      <h3>Proposed Schedule</h3>
      <div id="proposedDates"></div>
      <p class="logic-notes">
        Note: This schedule is generated based on preferences. You can modify the proposed schedule by clicking each day to toggle between "Dad," "Mom," or resolve conflicts.
      </p>

      <!-- Assigned Days Summary -->
      <div class="assigned-days-summary">
        <p><strong>Dad's Assigned Days:</strong> <span id="dadDaysCount">0</span></p>
        <p><strong>Mom's Assigned Days:</strong> <span id="momDaysCount">0</span></p>
      </div>
    </div>

    <!-- Download Section -->
    <div id="downloadSection" class="download-section">
      <h3>Download Options</h3>
      <button id="downloadExcel">
        <span>ðŸ“¥</span> Download as Excel
      </button>
      <button id="downloadCalendar">
        <span>ðŸ“…</span> Download for Google/Outlook
      </button>
    </div>
  </div>

  <!-- Paywall Modal -->
  <div id="paywallModal" class="modal">
    <div class="modal-content">
      <h2>Support Us</h2>
      <p>Please make a $5 donation in BTC to access the Generate Output feature.</p>
      <p><strong>Bitcoin Address:</strong></p>
      <p id="btcAddress">bc1qp7atyd9v5ddxqyl09wpzz6dp2wq78hny3tz6jj</p>
      <!-- Corrected path for the QR code -->
      <img id="btcQR" src="./qrcode.svg" alt="QR Code for BTC" />
      <p>Once you've made the payment, click "Confirm Payment."</p>
      <button id="confirmPayment">Confirm Payment</button>
      <button id="closeModal">Cancel</button>
    </div>
  </div>

  <!-- Corrected path for the script -->
  <script src="./script.js" defer></script>
</body>

</html>
